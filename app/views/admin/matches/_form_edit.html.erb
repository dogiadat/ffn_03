<%= form_for [:admin, @league_season, @match] do |f| %>
  <%= render "shared/error_messages", object: @match %>

  <%= f.hidden_field :league_season_id, value: @league_season.id %>

  <% if @match.end_time.present? && @match.errors.blank? %>
    <span class="center" id="finished-match"><%= t ".finished" %></span>
  <% elsif @match.start_time <= Time.now %>
    <span class="center" id="match-in-process"><%= t ".process" %></span>
  <% end %>

  <table class="match">
    <tr class="team-heading">
      <td class="team1">
        <%= image_tag @match.team1.logo.logo_title.url %>
        <h2><%= @match.team1.name %></h2>
      </td>
      <td class="match-info"><h2><%= t ".vs" %></h2></td>
      <td class="team2">
        <%= image_tag @match.team2.logo.logo_title.url %>
        <h2><%= @match.team2.name %></h2>
      </td>
    </tr>
    <tr class="chose-team">
      <% if @match.user_bets.any? || @match.start_time <= Time.now %>
        <td class="team1">
          <%= f.select :team1_id, @teams, {}, disabled: true,
            title: t(".has_user_bet"), data: {toggle: "tooltip"},
            class: "form-control pull-right" %>
        </td>
        <td class="match-infor">-</td>
        <td class="team2">
          <%= f.select :team2_id, @teams, {}, disabled: true,
            title: t(".has_user_bet"), data: {toggle: "tooltip"},
            class: "form-control" %>
        </td>
      <% else %>
        <td class="team1">
          <%= f.select :team1_id, @teams, {}, class: "form-control pull-right" %>
        </td>
        <td class="match-infor">-</td>
        <td class="team2">
          <%= f.select :team2_id, @teams, {}, class: "form-control" %>
        </td>
      <% end %>
    </tr>
    <tr class="start-time">
      <td class="start-time form-inline" colspan="3">
        <%= f.label :start_at, class: "pull-left" %>
        <% if @match.start_time >= Time.now %>
          <%= f.datetime_select :start_time, {}, class: "form-control start-time" %>
        <% else %>
          <%= f.datetime_select :start_time, {}, disabled: true,
            class: "form-control start-time" %>
        <% end %>
      </td>
    </tr>
    <tr class="team-odds">
      <% if @match.user_bets.any? || @match.start_time <= Time.now %>
        <td colspan="3" class="form-inline fixed">
          <%= f.label :odds, class: "pull-left" %>
          <%= f.number_field :team1_odds, step: 0.1, min: 0, max:20, disabled: true,
            title: t(".has_user_bet"), data: {toggle: "tooltip"},
            class: "form-control odds", placeholder: t(".team1_odds") %>
          <%= f.number_field :draw_odds, min: 0, step: 0.1, max:20, disabled: true,
            title: t(".has_user_bet"), data: {toggle: "tooltip"},
            class: "form-control odds draw-odds", placeholder: t(".draw_odds") %>
          <%= f.number_field :team2_odds, step: 0.1, min: 0, max:20, disabled: true,
            title: t(".has_user_bet"), data: {toggle: "tooltip"},
            class: "form-control odds", placeholder: t(".team2_odds") %>
        </td>
      <% else %>
        <td colspan="3" class="form-inline fixed">
          <%= f.label :odds, class: "pull-left" %>
          <%= f.number_field :team1_odds, step: 0.1, min: 0, max:20,
            class: "form-control odds", placeholder: t(".team1_odds") %>
          <%= f.number_field :draw_odds, min: 0, step: 0.1, max:20,
            class: "form-control odds draw-odds", placeholder: t(".draw_odds") %>
          <%= f.number_field :team2_odds, step: 0.1, min: 0, max:20,
            class: "form-control odds", placeholder: t(".team2_odds") %>
        </td>
      <% end %>
    </tr>
    <% if @match.start_time <= Time.now %>
      <tr class="row-goal">
        <% if @match.end_time.present? && @match.errors.blank? %>
          <td colspan="3">
            <span id="label-goal" class="pull-left"><%= f.label :goal %></span>
            <div class="goal team1-goal">
              <%= f.number_field :team1_goal, step: 1, min: 0, disabled: true,
                class: "team-goal", placeholder: t(".team1") %>
            </div>
            <div id="goal-center" class="goal">:</div>
            <div class="goal team2-goal">
              <%= f.number_field :team2_goal, step: 1, min: 0, disabled: true,
                class: "team-goal", placeholder: t(".team2") %>
            </div>
          </td>
        <% else %>
          <td colspan="3">
            <span id="label-goal" class="pull-left"><%= f.label :goal %></span>
            <div class="goal team1-goal">
              <%= f.number_field :team1_goal, step: 1, min: 0,
                value: @match.team1_goal || 0, class: "team-goal",
                placeholder: t(".team1") %>
            </div>
            <div id="goal-center" class="goal">:</div>
            <div class="goal team2-goal">
              <%= f.number_field :team2_goal, step: 1, min: 0,
                value: @match.team2_goal || 0, class: "team-goal",
                placeholder: t(".team2") %>
            </div>
          </td>
        <% end %>
      </tr>
    <% end %>
    <tr>
      <td class="start-time form-inline" colspan="3">
        <%= f.label :end_at, class: "pull-left" %>
        <% if @match.end_time.nil? || @match.errors.present? %>
          <%= f.datetime_select :end_time, {include_blank: true},
            class: "form-control start-time" %>
        <% else %>
          <%= f.datetime_select :end_time, {}, disabled: true,
            class: "form-control start-time" %>
        <% end %>
      </td>
    </tr>
  </table>

  <% unless @match.end_time.present? && @match.errors.blank? %>
    <div class="form-group create-match">
      <%= f.submit t(".save"), class: "btn btn-primary form-control" %>
    </div>
  <% end %>
<% end %>
