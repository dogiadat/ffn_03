<div class="show-all-leagues">
  <h1 class="center"><%= t ".leagues_management" %></h1>
  <hr>
  <div>
    <%= link_to new_admin_league_path, class: "btn btn-primary no-radius pull-left" do %>
      <span class="glyphicon glyphicon-plus"></span>
      <span><%= t ".new_league" %></span>
    <% end %>

    <%= search_form_for [:admin, @search], class: "form-inline search-form" do |f| %>
      <div class="form-group">
        <%= f.text_field :name_cont, placeholder: t(".search_name"), class: "form-control" %>
      </div>
      <div class="form-group">
        <%= f.select :country_id_eq, options_for_select(@countries, @search.country_id_eq),
          {include_blank: t(".select_country")}, class: "form-control" %>
      </div>
      <div class="form-group">
        <%= f.button class: "btn btn-primary no-radius" do %>
          <span class="glyphicon glyphicon-search"></span>
        <% end %>
      </div>
    <% end %>
  </div>
  <table class="table table-striped table-bordered">
    <thead>
      <th class="center">#</th>
      <th class="name"><%= sort_link @search, :name %></th>
      <th class="country"><%= sort_link @search, :country_name, t(".country") %></th>
      <th class="founded_at"><%= sort_link @search, :founded_at %></th>
      <th class="league-season"><%= t ".league_season" %></th>
      <th class="action"><%= t ".action" %></th>
    </thead>
    <tbody>
      <% @leagues.each_with_index do |league, index| %>
        <tr>
          <td class="center">
            <%= Settings.leagues.per_page * (@leagues.current_page - 1) + index + 1 %>
          </td>
          <td class="name"><%= league.name %></td>
          <td class="country center">
            <%= image_tag league.country.flag.url, size: Settings.country.size_tiny %>
          </td>
          <td class="founded_at center">
            <%= league.founded_at %>
          </td>
          <td class="league-season center">
            <%= league.league_seasons.count %>
          </td>
          <td class="action center">
            <%= link_to "", new_admin_league_league_season_path(league),
              class: "glyphicon glyphicon-plus", data: {toggle: "title"},
              title: t(".new_league_season") %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <%= paginate @leagues %>
  <% if @leagues.blank? %>
    <strong><%= t ".no_league" %></strong>
  <% end %>
</div>
